{% load static %}

<!DOCTYPE html>
<!-- saved from url=(0100)http://localhost:63342/voeller.com/src/index.html?_ijt=rr19aei4i07vj20jrbe8ksam43#multi-item-example -->
<html class="" lang="">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/css/dataTables.bootstrap.min.css"/>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/css/dataTables.material.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.9/css/mdb.min.css" rel="stylesheet">    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


    <title>Duplify | Rep List</title>
    <style>
        span > a {
            text-decoration: none;
            color: white;
        }
        h1, .nav-link {
            text-shadow:
                    1.25px 1.25px 0 #000,
                    1.25px 1.25px 0 #000,
                    1.25px 1.25px 0 #000,
                    1.25px 1.25px 0 #000;
        }
        .te {
            text-shadow:
                    .125px .125px 0 #000,
                    .125px .125px 0 #000,
                    .125px .125px 0 #000,
                    .125px .125px 0 #000;
        }
        body {
            background-image: url("{% static 'img/mist.png' %}");
            background-position: right top;
            background-repeat: no-repeat;

            background-attachment: fixed;
            background-size: 100% 100%;


        }
        input[type='radio'] {
            visibility:hidden;
        }
        .p{
            text-decorations:none;
            color:inherit;"
        }
        .btn-default{
            background-color: #222529;
        }
        small{
            color: white;
        }
        .pager li{
            display: inline;
        }

        .nav-item{
            z-index: 1000;
        }
        a:hover{
            text-decoration: none;
        }
        table{
            z-index: 1090;
        }

        #loading-indicator {
            position: absolute;
            left: 50%;
            top: 50%;
            z-index: 1100;
            box-shadow: 0px 0px 1000vw 1000vh rgba(0,0,0,0.6);
        }

    </style>
</head>
<body class="blue-grey lighten-5" style="overflow: auto; max-height: max-content;"  >
<button class="btn btn-primary  rounded-circle download ml-5 z-depth-5 p-3 shadow"  style="z-index: 5000;
position:
fixed;
bottom:
50px;
                    right: 30px;"
        id="navbarDropdownMenuLink">
    <span class="fa fa-2x fa-download "></span>
</button>

<nav class="navbar navbar-expand-lg navbar-primary scrolling-navbar">
    <a class="navbar-brand text-white"href="{% url 'index' %}"><h1>Duplify</h1></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link text-white" href="#" data-toggle="modal" data-target="#update-sort"
                   aria-haspopup="true"
                   aria-expanded="false">Update Sorting <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item ">
                <a class="nav-link text-white" href="#" data-toggle="modal" data-target="#exampleModalCenter"
                   aria-haspopup="true" aria-expanded="false">
                    Duplify Reports
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" href="javascript:f()">Reset</a>
            </li>

        </ul>
    </div>
</nav>
<div class="modal fade table-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div id="rep-table" class="row" style="overflow-x: auto;">

            </div>
            <div id="table" class="row text-dark" style="overflow-x: auto;">

            </div>
        </div>
    </div>
</div>
<div class="modal fade text-dark" id="exampleModalCenter" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLongTitle">Reports</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <a  href="report/A" class=" my-3 btn btn-block badge-pill btn-large btn-success" >Audit Report </a>
                <a  href="report/D" class=" my-3 btn btn-block badge-pill btn-large btn-success" >Duplify Report </a>
                <a href="report/DD" class="my-3 btn btn-block badge-pill btn-large btn-success" >Dedup Report</a>
                <a href="report/U" class="my-3 btn btn-block badge-pill btn-large btn-success" >Upload Report</a>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade text-dark" id="update-sort" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title text-center" id="exampleModalLongTitle">Sorting</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h4>Adjust the Duplify Sorter</h4>
                <p>This will sort all reps based on the new thresholds.</p>
                <div class="col-12">
                    <div class="progress">
                        <div class="progress-bar bg-primary" style="width: 70%">
                            <span class="sr-only">35% Complete (success)</span>
                        </div>
                        <div class="progress-bar bg-warning" style="width: 28%">
                            <span class="sr-only">20% Complete (warning)</span>
                        </div>
                        <div class="progress-bar bg-success" style="width: 2%">
                            <span class="sr-only">15% Complete (primary)</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="input-group my-3 col-6">
                        <div class="input-group-prepend col-">
                            <span class="input-group-text col-12" id="basic-addon1">New-Undecided</span>
                        </div>
                        <input type="number" class="form-control col-3" value=70 id="new-undi">
                    </div>
                    <div class="input-group my-3 col-6">
                        <div class="input-group-prepend col-">
                            <span class="input-group-text col-12" id="basic-addon1">Undecided-Dup</span>
                        </div>
                        <input type="number" class="form-control col-3" value=98 id="undi-dup">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="resort()">Save changes</button>

                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>

</div>
<div class="container-fluid">
    <ul class="nav nav-pills nav-fill text-white  my-1" id="pills-tab" role="tablist">
        <li class="nav-item badge-pill">

            <a class="nav-link active p badge-pill " id="pills-dup-tab" data-download="export/Duplicate"
               data-toggle="pill"
               href="#pills-dup"
               role="tab"
               aria-controls="pills-dup" aria-selected="true">
                Duplicate Records
            </a>
        </li>
        <li class="nav-item badge-pill">

            <a class="nav-link  badge-pill p " id="pills-new-tab" data-download="export/NewRecord"
               data-toggle="pill"
               href="#pills-new" role="tab"
               aria-controls="pills-new" aria-selected="false">
                New Records
            </a>
        </li>
        <li class="nav-item badge-pill">

            <a class="nav-link  badge-pill p" id="pills-man-tab" data-download="export/ManualCheck" data-toggle="pill"
               href="#pills-man"
               role="tab"
               aria-controls="pills-man" aria-selected="false">
                Manual Check
            </a>
        </li>
    </ul>
    <div class="row"><img src="{% static 'img/loader.gif' %}" id="loading-indicator"
                          class="rounded-circle border-0 bg-white"/></div>
    <div class="card  tab-content rounded rgba-white-light te" id="pills-tabContent" style="overflow-y: auto; height:
    85vh">
        <div class="tab-pane show active" id="pills-dup" role="tabpanel" aria-labelledby="pills-dup-tab"></div>
        <div class="tab-pane " id="pills-new" role="tabpanel" aria-labelledby="pills-new-tab"></div>
        <div class="tab-pane " id="pills-man" role="tabpanel" aria-labelledby="pills-man-tab"></div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.9/js/mdb.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/js/dataTables.dataTables.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.19/js/dataTables.material.min.js"></script>
<script>
    var man = false;
    var dup = false;
    var news = false;

    function table_popover() {

        $('[data-toggle="popover"]').popover({
            html:true,
            placement:'bottom',
            container: 'body',
            content: function(){

                var id = 'id-'+ $.now();
                var a = $(this).data('id');
                var x = $(this).data('id1');
                var y = $(this).data('id2');
                var z = $(this).data('id3');
                $.getJSON("{% url 'closest' %}",{id:a, close1:x, close2:y, close3:z, }, function (result){
                    var content =$("<fieldset></fieldset>").addClass("form-group");
                    if (result['table1'] != '') {
                        var t1 = $("<div><span class ='badge-pill r  badge-success z-depth-1'><a href='#' " +
                            "onclick='MyFunction(this);return false;' data-id='"+x+"' " +
                            "data-rep='"+a+"'>#1</a></span></div>")
                            .addClass
                            ("custom-control " +
                                "custom-radio ")
                            .append($
                            ("<input></input>").addClass
                            ("custom-control-input mt-5 z-depth-5").attr({
                                type: "radio",
                                value: x,
                                id: x,
                                name: 'rad'
                            })).append(result['table1']);
                        content.append(t1);
                    }
                    if (result['table2'] != '') {
                        var t2 = $("<div><span class ='badge-pill r  badge-success z-depth-1'><a href='#' " +
                            "onclick='MyFunction(this);return false;' data-id='"+y+"' " +
                            "data-rep='"+a+"'>#2</a></span></div>")
                            .addClass("custom-control custom-radio").append($
                            ("<input></input>").addClass
                            ("custom-control-input  mt-5").attr({
                                type: "radio",
                                value: y,
                                id: y,
                                name: 'rad'
                            })).append( result['table2']);
                        content.append(t2);

                    }
                    if (result['table3'] != '') {

                        var t3 = $("<div><span class ='badge-pill r  badge-success z-depth-1'><a href='#' " +
                            "onclick='MyFunction(this);return false;' data-id='"+z+"' " +
                            "data-rep='"+a+"'>#3</a></span></div>")
                            .addClass("custom-control custom-radio").append($
                            ("<input></input>").addClass
                            ("custom-control-input  mt-5").attr({
                                type: "radio",
                                value: z,
                                id: z,
                                name: 'rad'
                            })).append(result['table3']);
                        content.append(t3);
                    }
                    var sort =  '<div class="col-1"> <button class="btn btn-success rounded-circle p-1 float-right" ' +
                        'data-rep="'+a+'" ' +
                        'onclick="sort(this)' +
                        '"><span class="fa fa-check fa-2x"></span></button> </div>';

                    var type = $("<div data-toggle='buttons'></div>")
                        .addClass("btn-groupcol-3")
                        .append($("<label></label>")
                            .addClass("btn btn-primary btn-sm dup active waves-effect")
                            .append('<span class="fa fa-2x fa-users "></span>')
                            .append($("<input>Dup</input>")
                                .addClass("dup")
                                .attr({
                                    type: "radio",
                                    name: "types",
                                    id: "dup",
                                    value: "dup",
                                    autocomplete: "off"
                                })))
                        .append($("<label></label>")
                            .addClass("btn btn-primary btn-sm new waves-effect")
                            .append('<span class="fa fa-2x fa-user "></span>')
                            .append($("<input>New</input>")
                                .addClass("new")
                                .attr({
                                    type: "radio",
                                    name: "types",
                                    id: "new",
                                    value: "new",
                                    autocomplete: "off"
                                })));
                    var buttons = $("<div></div>").addClass("row").append($('<div class="col-6"></div>').append(type)).append(sort);
                    content.append(buttons);
                    //add toggle switch at the top for dup or new, if toggle dup,
                    // then show radio button group for each choice
                    //sort will ajax call sending the rep id and the chosen rep or the rep id and new
                    //the rep with be updated with a type (and a new closest1)
                    //then the two affected lists will update
                    $('#'+id).html(content);
                    $('input[type=radio][name=types]').change( function (evt) {
                        if(this.id == "new"){
                             $('.r').hide();

                        }
                        else{
                            $('.r').show();


                        }
                    });
                });
                return '<div id="'+id+'"> Loading... </div>';
            }
        });
        $('.btn').on('shown.bs.popover', function () {
            $('.popover').css('max-width', "100%");
            $('.popover').css('min-width', "38%");
            $('.popover').addClass('z-depth-3 border-0');
        });
        $('input[type=radio][name=type]').change( function () {
            alert('dup');
        });
        $('th > a').on('click', function (e) {
            e.preventDefault();
            var parsed = $(this).attr('href').split('&');
            if (parsed[0].includes('Duplicate')){
                dup_table(parsed[2].replace('sort=',''));
            }
            else if (parsed[0].includes('New')){
                new_table(parsed[2].replace('sort=',''));
            }
            if (parsed[0].includes('Manual')){
                man_table(parsed[2].replace('sort=',''));
            }


        });
        $('.dup').on('checked', function (e) {
            confirm('bro');


        });

</script>

<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.10/js/mdb.min.js"></script>
<!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
<script>

    $('#carousel-main').carousel({
        interval: 2000
    });
    $('#carousel-modal').carousel({
        interval: 2000
    });

    var buttonMenu  = false;


    $(document).ready(function() {
        // popovers Initialization



        $('#fileSubmit').click(function (evt) {

            if (!buttonMenu) {

                $('#popup1').animate({bottom: '+=80', opacity: 1}, 500);
                $('#popup2').animate({bottom: '+=160', opacity: 1}, 500);
                $('#popup3').animate({bottom: '+=240', opacity: 1}, 500);
                buttonMenu=true;
            }else{
                $('#popup1').animate({bottom: '-=80', opacity: 0}, 500);
                $('#popup2').animate({bottom: '-=160', opacity: 0}, 500);
                $('#popup3').animate({bottom: '-=240', opacity: 0}, 500);
                buttonMenu = false;
            }
        });
    });

    {#setInterval(updateGradient,10);#}
    function f() {
        if (confirm('WARNING: You are about to erase all records in the database.')) {
            window.location.replace("{% url 'flush_db' %}");
        } else {
            // Do nothing!
        }
    }

    function MyFunction(evt) {
        if (confirm('Are sure you want to sort this record as a duplicate?')) {
            sort(evt);
        } else {
            // Do nothing!
        }
    }

</script>
<div class="hiddendiv common"></div><div style="background-color: rgb(255, 143, 0); display: none; color: white; text-align: center; position: fixed; top: 0px; left: 0px; width: 100%; height: auto; min-width: 100%; min-height: auto; max-width: 100%; font: 12px &quot;Helvetica Neue&quot;, Helvetica, Arial, Geneva, sans-serif; cursor: pointer; padding: 5px;"><span style="color: white; font: 12px &quot;Helvetica Neue&quot;, Helvetica, Arial, Geneva, sans-serif;">You have turned off the paragraph player. You can turn it on again from the options page.</span><img src="chrome-extension://gfjopfpjmkcfgjpogepmdjmcnihfpokn/img/icons/icon-close_16.png" style="width: 20px; height: auto; min-width: 20px; min-height: auto; max-width: 20px; float: right; margin-right: 10px;"></div></body></html>

